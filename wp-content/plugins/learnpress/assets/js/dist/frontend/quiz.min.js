!function(){var e={605:function(){LP.Hook.addAction("lp-compatible-builder",(()=>{LP.Hook.removeAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend&&[...document.querySelectorAll("#popup-content")][0].addEventListener("scroll",(()=>{Waypoint.refreshAll(),window.dispatchEvent(new Event("resize"))})),"undefined"!=typeof vc_js&&"undefined"!=typeof VcWaypoint&&[...document.querySelectorAll("#popup-content")][0].addEventListener("scroll",(()=>{VcWaypoint.refreshAll()}))})),LP.Hook.addAction("lp-quiz-compatible-builder",(()=>(LP.Hook.removeAction("lp-quiz-compatible-builder"),LP.Hook.doAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend?window.elementorFrontend.init():"undefined"!=typeof vc_js?("undefined"!=typeof vc_round_charts&&vc_round_charts(),"undefined"!=typeof vc_pieChart&&vc_pieChart(),"undefined"!=typeof vc_line_charts&&vc_line_charts(),window.vc_js()):void 0))),LP.Hook.addAction("lp-question-compatible-builder",(()=>(LP.Hook.removeAction("lp-question-compatible-builder"),LP.Hook.removeAction("lp-quiz-compatible-builder"),LP.Hook.doAction("lp-compatible-builder"),"undefined"!=typeof elementorFrontend?window.elementorFrontend.init():"undefined"!=typeof vc_js?("undefined"!=typeof vc_round_charts&&vc_round_charts(),"undefined"!=typeof vc_pieChart&&vc_pieChart(),"undefined"!=typeof vc_line_charts&&vc_line_charts(),window.vc_js()):void 0)))},184:function(e,t){var s;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)){if(s.length){var o=r.apply(null,s);o&&e.push(o)}}else if("object"===i){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){e.push(s.toString());continue}for(var a in s)n.call(s,a)&&s[a]&&e.push(a)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(s=function(){return r}.apply(t,[]))||(e.exports=s)}()},965:function(e){"use strict";function t(e,s){var n;if(Array.isArray(s))for(n=0;n<s.length;n++)t(e,s[n]);else for(n in s)e[n]=(e[n]||[]).concat(s[n])}e.exports=function(e){var s,n={};return t(n,e),(s=function(e){return function(t){return function(s){var r,i,o=n[s.type],a=t(s);if(o)for(r=0;r<o.length;r++)(i=o[r](s,e))&&e.dispatch(i);return a}}}).effects=n,s}}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){"use strict";s.r(n),s.d(n,{default:function(){return Ge},init:function(){return Ke}});var e={};s.r(e),s.d(e,{__requestBeforeStartQuiz:function(){return ae},__requestCheckAnswerSuccess:function(){return fe},__requestShowHintSuccess:function(){return he},__requestStartQuizSuccess:function(){return ue},__requestSubmitQuiz:function(){return ce},__requestSubmitQuizSuccess:function(){return de},checkAnswer:function(){return _e},markQuestionRendered:function(){return qe},sendKey:function(){return Se},setCurrentPage:function(){return oe},setCurrentQuestion:function(){return ie},setQuizData:function(){return re},setQuizMode:function(){return we},showHint:function(){return ge},startQuiz:function(){return le},submitQuiz:function(){return pe},updateUserQuestionAnswers:function(){return me}});var t={};s.r(t),s.d(t,{getCurrentQuestion:function(){return Te},getData:function(){return Ne},getDefaultRestArgs:function(){return Ie},getItemStatus:function(){return ze},getProp:function(){return ke},getQuestion:function(){return Re},getQuestionAnswered:function(){return Ce},getQuestionMark:function(){return Ae},getQuestionOptions:function(){return ye},getQuestions:function(){return be},getQuestionsSelectedAnswers:function(){return xe},getQuizAnswered:function(){return Qe},getQuizAttempts:function(){return Pe},getUserMark:function(){return De},isCheckedAnswer:function(){return Oe},isCorrect:function(){return Le}});var r=window.wp.element,i=window.wp.compose,o=window.wp.data,a=window.wp.i18n,u=e=>{let t;const s=86400;if(e>s)t=(e-e%s)/s,e%=s;else if(e==s)return"24:00";const n=new Date(1e3*e).toUTCString().match(/\d{2}:\d{2}:\d{2}/)[0].split(":");return t&&(n[0]=parseInt(n[0])+24*t),n.join(":")};const{Hook:l}=LP;var c=()=>{const e=e=>(0,o.select)("learnpress/quiz").getData(e),t=l.applyFilters("quiz-meta-fields",{duration:{title:(0,a.__)("Duration:","learnpress"),name:"duration",content:u(e("duration"))||"--"},passingGrade:{title:(0,a.__)("Passing grade:","learnpress"),name:"passing-grade",content:e("passingGrade")||"--"},questionsCount:{title:(0,a.__)("Questions:","learnpress"),name:"questions-count",content:e("questionIds")?e("questionIds").length:0}});return t&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("ul",{className:"quiz-intro"},Object.values(t).map(((e,t)=>{const s=e.name||t;return(0,r.createElement)("li",{key:`quiz-intro-field-${t}`,className:`quiz-intro-item quiz-intro-item--${s}`},(0,r.createElement)("div",{className:"quiz-intro-item__title",dangerouslySetInnerHTML:{__html:e.title}}),(0,r.createElement)("span",{className:"quiz-intro-item__content",dangerouslySetInnerHTML:{__html:e.content}}))}))))};class d extends r.Component{startQuiz=e=>{e&&e.preventDefault();const t=document.querySelector(".lp-button.start");t&&t.setAttribute("disabled","disabled"),t.classList.add("loading");const{startQuiz:s,status:n}=this.props;if("completed"===n){const{confirm:e,isOpen:s}=(0,o.select)("learnpress/modal");if("no"===e((0,a.__)("Are you sure you want to retake the quiz?","learnpress"),this.startQuiz))return void(!s()&&t&&t.removeAttribute("disabled"))}s()};nav=e=>t=>{let{questionNav:s,currentPage:n,numPages:r,setCurrentPage:i}=this.props;"prev"===e?n>1?n-=1:n="infinity"===s?r:1:n<r?n+=1:n="infinity"===s?1:r,i(n)};moveTo=e=>t=>{t.preventDefault();const{numPages:s,setCurrentPage:n}=this.props;e<1||e>s||n(e)};isLast=()=>{const{currentPage:e,numPages:t}=this.props;return e===t};isFirst=()=>{const{currentPage:e}=this.props;return 1===e};submit=()=>{const{submitQuiz:e}=this.props,{confirm:t}=(0,o.select)("learnpress/modal");"no"!==t((0,a.__)("Are you sure to submit the quiz?","learnpress"),this.submit)&&e()};setQuizMode=e=>()=>{const{setQuizMode:t}=this.props;t(e)};isReviewing=()=>{const{isReviewing:e}=this.props;return e};pageNumbers(e){const{numPages:t,currentPage:s}=this.props;if(t<2)return"";(e={numPages:t,currentPage:s,midSize:1,endSize:1,prevNext:!0,...e||{}}).endSize<1&&(e.endSize=1),e.midSize<0&&(e.midSize=1);const n=[...Array(t).keys()];let i=!1;return(0,r.createElement)("div",{className:"nav-links"},e.prevNext&&!this.isFirst()&&(0,r.createElement)("button",{className:"page-numbers prev","data-type":"question-navx",onClick:this.nav("prev")},(0,a.__)("Prev","learnpress")),n.map((t=>(t+=1)===e.currentPage?(i=!0,(0,r.createElement)("span",{key:`page-number-${t}`,className:"page-numbers current"},t)):t<=e.endSize||e.currentPage&&t>=e.currentPage-e.midSize&&t<=e.currentPage+e.midSize||t>e.numPages-e.endSize?(i=!0,(0,r.createElement)("button",{key:`page-number-${t}`,className:"page-numbers",onClick:this.moveTo(t)},t)):i?(i=!1,(0,r.createElement)("span",{key:`page-number-${t}`,className:"page-numbers dots"},"…")):"")),e.prevNext&&!this.isLast()&&(0,r.createElement)("button",{className:"page-numbers next","data-type":"question-navx",onClick:this.nav("next")},(0,a.__)("Next","learnpress")))}render(){const{status:e,questionNav:t,isReviewing:s,showReview:n,numPages:i,question:o,questionsPerPage:u,canRetry:l,retakeNumber:c,requiredPassword:d,allowRetake:p}=this.props,m=["quiz-buttons"];("started"===e||s)&&m.push("align-center"),"questionNav"===t&&m.push("infinity"),this.isFirst()&&m.push("is-first"),this.isLast()&&m.push("is-last");const h=document.querySelector("#popup-sidebar"),g=document.querySelector("#learn-press-quiz-app");let f="";f="started"===e||s?{marginLeft:h&&h.offsetWidth/2,width:g&&g.offsetWidth}:null;let _=" fixed";return"no"==lpQuizSettings.navigationPosition&&(_=" nav-center"),(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:m.join(" ")},(0,r.createElement)("div",{className:"button-left"+("started"===e||s?_:""),style:f},("completed"===e&&l||-1!==["","viewed"].indexOf(e))&&!s&&!d&&(0,r.createElement)("button",{className:"lp-button start",onClick:this.startQuiz},"completed"===e?`${(0,a.__)("Retake","learnpress")} ${p?"":" "+(c?` (${c})`:"")} `:" "+(0,a.__)("Start","learnpress")),("started"===e||s)&&i>1&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"questions-pagination"},this.pageNumbers()))),(0,r.createElement)("div",{className:"button-right"},"started"===e&&(0,r.createElement)(r.Fragment,null,("infinity"===t||this.isLast())&&!s&&(0,r.createElement)("button",{className:"lp-button submit-quiz",onClick:this.submit},(0,a.__)("Finish Quiz","learnpress"))),s&&n&&(0,r.createElement)("button",{className:"lp-button back-quiz",onClick:this.setQuizMode("")},(0,a.__)("Result","learnpress")),"completed"===e&&n&&!s&&(0,r.createElement)("button",{className:"lp-button review-quiz",onClick:this.setQuizMode("reviewing")},(0,a.__)("Review","learnpress")))),this.props.message&&!0!==this.props.success&&(0,r.createElement)("div",{className:"learn-press-message error"},this.props.message))}}const p=(0,i.compose)((0,o.withSelect)((e=>{const{getData:t}=e("learnpress/quiz");return{status:t("status"),showCheck:t("instantCheck"),checkedQuestions:t("checkedQuestions"),hintedQuestions:t("hintedQuestions"),questionsPerPage:t("questionsPerPage")}})))((e=>{const{showCheck:t,checkedQuestions:s,hintedQuestions:n,question:i,status:o,type:a,Button:u}=e;if("started"!==o)return!1;const l=(0,r.createElement)(u,{question:i});switch(a){case"hint":return n?!!i.hasHint&&-1===n.indexOf(i.id)&&l:l;case"check":return!!t&&(s?-1===s.indexOf(i.id)&&l:l)}}));var m=(0,i.compose)([(0,o.withSelect)((e=>{const{getData:t,getCurrentQuestion:s}=e("learnpress/quiz"),n={id:t("id"),status:t("status"),questionIds:t("questionIds"),questionNav:t("questionNav"),isReviewing:t("reviewQuestions")&&"reviewing"===t("mode"),showReview:t("reviewQuestions"),showCheck:t("instantCheck"),checkedQuestions:t("checkedQuestions"),hintedQuestions:t("hintedQuestions"),numPages:t("numPages"),pages:t("pages"),currentPage:t("currentPage"),questionsPerPage:t("questionsPerPage"),pageNumbers:t("pageNumbers"),keyPressed:t("keyPressed"),canRetry:t("retakeCount")>0&&t("retaken")<t("retakeCount"),retakeNumber:t("retakeCount")>0&&t("retaken")<t("retakeCount")?t("retakeCount")-t("retaken"):null,message:t("messageResponse")||!1,success:void 0===t("successResponse")||t("successResponse"),requiredPassword:t("requiredPassword"),allowRetake:t("allowRetake")};if(1===n.questionsPerPage&&(n.question=s("object")),1===lpQuizSettings.checkNorequizenroll){const e=window.localStorage.getItem("quiz_off_retaken_"+lpQuizSettings.id);t("retakeCount")>e?(n.retakeNumber=t("retakeCount")-e,n.canRetry=!0):n.canRetry=!1}return n.allowRetake&&(n.canRetry=!0),n})),(0,o.withDispatch)(((e,{id:t})=>{const{startQuiz:s,setCurrentQuestion:n,submitQuiz:r,setQuizMode:i,showHint:o,checkAnswer:a,setCurrentPage:u}=e("learnpress/quiz");return{startQuiz:s,setCurrentQuestion:n,setQuizMode:i,setCurrentPage:u,submitQuiz(e){r(e)},showHint(e){o(e)},checkAnswer(e){a(e)}}}))])(d);class h extends r.Component{showHint=()=>{const{showHint:e,question:t}=this.props;e(t.id,!t.showHint)};render(){const{question:e}=this.props;return e.hint?(0,r.createElement)("button",{className:"btn-show-hint",onClick:this.showHint},(0,r.createElement)("span",null,(0,a.__)("Hint","learnpress"))):""}}var g=(0,i.compose)((0,o.withDispatch)(((e,{id:t})=>{const{showHint:s}=e("learnpress/quiz");return{showHint(e,t){s(e,t)}}})))(h),f=s(184),_=s.n(f);class q extends r.Component{constructor(){super(...arguments),this.state={loading:!1}}checkAnswer=()=>{const{checkAnswer:e,question:t,answered:s}=this.props;s&&(e(t.id),this.setState({loading:!0}))};render(){const{answered:e}=this.props;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("button",{className:_()("lp-button","instant-check",{loading:this.state.loading,disable:!e}),onClick:this.checkAnswer},(0,r.createElement)("span",{className:"instant-check__icon"}),(0,a.__)("Check answers","learnpress"),!e&&(0,r.createElement)("div",{className:"instant-check__info",dangerouslySetInnerHTML:{__html:(0,a.__)("You need to answer the question before checking the answer key.","learnpress")}})))}}var w=(0,i.compose)((0,o.withSelect)(((e,{question:{id:t}})=>{const{getQuestionAnswered:s}=e("learnpress/quiz");return{answered:s(t)}})),(0,o.withDispatch)(((e,{id:t})=>{const{checkAnswer:s}=e("learnpress/quiz");return{checkAnswer(e){s(e)}}})))(q),S=function(e){const{question:t}=e,s={"instant-check":()=>(0,r.createElement)(p,{type:"check",Button:w,question:t}),hint:()=>(0,r.createElement)(p,{type:"hint",Button:g,question:t})};return(0,r.createElement)(r.Fragment,null,LP.config.questionFooterButtons().map((e=>(0,r.createElement)(r.Fragment,{key:`button-${e}`},s[e]&&s[e]()))))};const E=window.jQuery,{uniqueId:v,isArray:y,isNumber:z,bind:k}=lodash;class P extends r.Component{constructor(){super(...arguments),this.state={time:null,showHint:!1},this.$wrap=null}componentDidMount(e){const{question:t,isCurrent:s,markQuestionRendered:n}=this.props;return s&&n(t.id),this.state.time||this.setState({time:new Date}),LP.Hook.doAction("lp-question-compatible-builder"),"undefined"!=typeof MathJax&&void 0!==MathJax.Hub&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),e}setRef=e=>{this.$wrap=E(e)};parseOptions=e=>(e&&(e=y(e)?e:JSON.parse(CryptoJS.AES.decrypt(e.data,e.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),e=y(e)?e:JSON.parse(e)),e||[]);getWrapperClass=()=>{const{question:e,answered:t}=this.props,s=["question","question-"+e.type],n=this.parseOptions(e.options);return n.length&&void 0!==n[0].isTrue&&s.push("question-answered"),s};getEditLink=()=>{const{question:e,editPermalink:t}=this.props;return t?t.replace(/post=(.*[0-9])/,`post=${e.id}`):""};editPermalink=e=>(0,a.sprintf)('<a href="%s">%s</a>',e,(0,a.__)("Edit","learnpress"));render(){const{question:e,isShow:t,isShowIndex:s,isShowHint:n,status:i}=this.props,o=LP.questionTypes.default,u=this.getEditLink();u&&jQuery("#wp-admin-bar-edit-lp_question").find(".ab-item").attr("href",u);const l={index:()=>s?(0,r.createElement)("span",{className:"question-index"},s,"."):"",title:()=>(0,r.createElement)("span",{dangerouslySetInnerHTML:{__html:e.title}}),hint:()=>(0,r.createElement)(g,{question:e}),"edit-permalink":()=>u&&(0,r.createElement)("span",{dangerouslySetInnerHTML:{__html:this.editPermalink(u)},className:"edit-link"})},c={title:()=>(0,r.createElement)("h4",{className:"question-title"},LP.config.questionTitleParts().map((e=>(0,r.createElement)(r.Fragment,{key:`title-part-${e}`},l[e]&&l[e]())))),content:()=>(0,r.createElement)("div",{className:"question-content",dangerouslySetInnerHTML:{__html:e.content}}),"answer-options":()=>this.$wrap&&(0,r.createElement)(o,{...this.props,$wrap:this.$wrap}),explanation:()=>e.explanation&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"question-explanation-content"},(0,r.createElement)("strong",{className:"explanation-title"},(0,a.__)("Explanation","learnpress"),":"),(0,r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.explanation}}))),hint:()=>e.hint&&!e.explanation&&e.showHint&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"question-hint-content"},(0,r.createElement)("strong",{className:"hint-title"},(0,a.__)("Hint","learnpress"),":"),(0,r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint}}))),buttons:()=>"started"===i&&(0,r.createElement)(S,{question:e})},d=LP.config.questionBlocks();return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:this.getWrapperClass().join(" "),style:{display:t?"":"none"},"data-id":e.id,ref:this.setRef},d.map((e=>(0,r.createElement)(r.Fragment,{key:`block-${e}`},c[e]?c[e]():"")))))}}var Q=(0,i.compose)([(0,o.withSelect)(((e,{question:{id:t}})=>{const{getData:s,getQuestionAnswered:n,getQuestionMark:r}=e("learnpress/quiz");return{status:s("status"),questions:s("question"),answered:n(t),questionsRendered:s("questionsRendered"),editPermalink:s("editPermalink"),numPages:s("numPages"),mark:r(t)||""}})),(0,o.withDispatch)((e=>{const{updateUserQuestionAnswers:t,markQuestionRendered:s}=e("learnpress/quiz");return{markQuestionRendered:s,updateUserQuestionAnswers:t}}))])(P);class b extends r.Component{constructor(e){super(...arguments),this.needToTop=!1,this.state={isReviewing:null,currentPage:0,self:this}}static getDerivedStateFromProps(e,t){const s=["isReviewing","currentPage"],n={};for(let r=0;r<s.length;r++)e[s[r]]!==t[s[r]]&&(n[s[r]]=e[s[r]]);return Object.values(n).length?(t.self.needToTop=!0,n):null}componentDidUpdate(){this.needToTop&&(jQuery("#popup-content").animate({scrollTop:0}).find(".content-item-scrollable:last").animate({scrollTop:0}),this.needToTop=!1)}startQuiz=e=>{e.preventDefault();const{startQuiz:t}=this.props;t()};isInVisibleRange=(e,t)=>{const{currentPage:s,questionsPerPage:n}=this.props;return s===Math.ceil(t/n)};nav=e=>{const{sendKey:t}=this.props;switch(e.keyCode){case 37:return t("left");case 38:case 40:return;case 39:return t("right");default:e.keyCode>=49&&e.keyCode<=57&&t(e.keyCode-48)}};render(){const{status:e,currentQuestion:t,questions:s,questionsRendered:n,isReviewing:i,questionsPerPage:o}=this.props;let a=!0;return"completed"!==e||i||(a=!1),(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{tabIndex:100,onKeyUp:this.nav},(0,r.createElement)("div",{className:"quiz-questions",style:{display:a?"":"none"}},s.map(((e,s)=>{const i=!o&&t===e.id,a=n&&-1!==n.indexOf(e.id),u=this.isInVisibleRange(e.id,s+1);return a||!a||u?(0,r.createElement)(Q,{key:`loop-question-${e.id}`,isCurrent:i,isShow:u,isShowIndex:!!o&&s+1,questionsPerPage:o,question:e}):""})))))}}var N=(0,i.compose)((0,o.withSelect)(((e,t,s)=>{const{getData:n,getQuestions:r}=e("learnpress/quiz");return{status:n("status"),currentQuestion:n("currentQuestion"),questions:r(),questionsRendered:n("questionsRendered"),isReviewing:"reviewing"===n("mode"),numPages:n("numPages"),currentPage:n("currentPage"),questionsPerPage:n("questionsPerPage")||1}})),(0,o.withDispatch)((e=>{const{startQuiz:t,sendKey:s}=e("learnpress/quiz");return{startQuiz:t,sendKey:s}})))(b),I=()=>{const e=(0,o.select)("learnpress/quiz").getData("attempts")||[],t=e&&!!e.length;return!!t&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"quiz-attempts"},(0,r.createElement)("h4",{className:"attempts-heading"},(0,a.__)("Last Attempt","learnpress")),t&&(0,r.createElement)("table",null,(0,r.createElement)("thead",null,(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"quiz-attempts__questions"},(0,a.__)("Questions","learnpress")),(0,r.createElement)("th",{className:"quiz-attempts__spend"},(0,a.__)("Time spent","learnpress")),(0,r.createElement)("th",{className:"quiz-attempts__marks"},(0,a.__)("Marks","learnpress")),(0,r.createElement)("th",{className:"quiz-attempts__grade"},(0,a.__)("Passing grade","learnpress")),(0,r.createElement)("th",{className:"quiz-attempts__result"},(0,a.__)("Result","learnpress")))),(0,r.createElement)("tbody",null,e.map(((e,t)=>(0,r.createElement)("tr",{key:`attempt-${t}`},(0,r.createElement)("td",{className:"quiz-attempts__questions"},`${e.questionCorrect} / ${e.questionCount}`),(0,r.createElement)("td",{className:"quiz-attempts__spend"},e.timeSpend||"--"),(0,r.createElement)("td",{className:"quiz-attempts__marks"},`${e.userMark} / ${e.mark}`),(0,r.createElement)("td",{className:"quiz-attempts__grade"},e.passingGrade||"-"),(0,r.createElement)("td",{className:"quiz-attempts__result"},`${parseFloat(e.result).toFixed(2)}%`," ",(0,r.createElement)("span",null,e.graduationText)))))))))},C=()=>{const{getData:e}=(0,o.select)("learnpress/quiz"),{submitQuiz:t}=(0,o.dispatch)("learnpress/quiz"),s=e("totalTime"),n=e("duration"),[i,a]=(0,r.useState)(s);let[u,l]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const e=setInterval((()=>{if(n>0){let s=i;s-=1,s=wp.hooks.applyFilters("js-lp-quiz-remaining_time",s,n),s>0?(a(s),u++,l(n-s)):(clearInterval(e),t())}else u++,l(u),a(u)}),1e3);return()=>clearInterval(e)}),[i,u]),(0,r.createElement)("div",{className:"countdown"},(0,r.createElement)("i",{className:"fas fa-stopwatch"}),(0,r.createElement)("span",null,((e=":")=>{const t=[];let n;return s<3600?(t.push((i-i%60)/60),t.push(i%60)):s&&(t.push((i-i%3600)/3600),n=i%3600,t.push((n-n%60)/60),t.push(n%60)),t.map((e=>e<10?`0${e}`:e)).join(e)})()),(0,r.createElement)("input",{type:"hidden",name:"lp-quiz-time-spend",value:u}))},A=window.wp.url;const T=jQuery;let R=null;const O={elLPOverlay:null,elMainContent:null,elTitle:null,elBtnYes:null,elBtnNo:null,elFooter:null,elCalledModal:null,callBackYes:null,instance:null,init(){return!!this.instance||(this.elLPOverlay=T(".lp-overlay"),!!this.elLPOverlay.length&&(R=this.elLPOverlay,this.elMainContent=R.find(".main-content"),this.elTitle=R.find(".modal-title"),this.elBtnYes=R.find(".btn-yes"),this.elBtnNo=R.find(".btn-no"),this.elFooter=R.find(".lp-modal-footer"),T(document).on("click",".close, .btn-no",(function(){R.hide()})),T(document).on("click",".btn-yes",(function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof O.callBackYes&&O.callBackYes()})),this.instance=this,!0))},setElCalledModal(e){this.elCalledModal=e},setContentModal(e,t){this.elMainContent.html(e),"function"==typeof t&&t()},setTitleModal(e){this.elTitle.html(e)}};var L=O,x={elBtnFinishCourse:null,elBtnCompleteItem:null,init(){L.init()&&void 0!==lpGlobalSettings&&"yes"===lpGlobalSettings.option_enable_popup_confirm_finish&&(this.elBtnFinishCourse=document.querySelectorAll(".lp-btn-finish-course"),this.elBtnCompleteItem=document.querySelector(".lp-btn-complete-item"),this.elBtnCompleteItem&&this.elBtnCompleteItem.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");L.elLPOverlay.show(),L.setTitleModal(t.dataset.title),L.setContentModal('<div class="pd-2em">'+t.dataset.confirm+"</div>"),L.callBackYes=()=>{t.submit()}})),this.elBtnFinishCourse&&this.elBtnFinishCourse.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");L.elLPOverlay.show(),L.setTitleModal(t.dataset.title),L.setContentModal('<div class="pd-2em">'+t.dataset.confirm+"</div>"),L.callBackYes=()=>{t.submit()}})))))}};const{debounce:D}=lodash;var M=()=>{const[e,t]=(0,r.useState)(0),[s,n]=(0,r.useState)(!1),i=(0,o.useSelect)((e=>e("learnpress/quiz").getData("id")),[]),u=(0,o.useSelect)((e=>e("learnpress/quiz").getData("results")),[]),l=(0,o.useSelect)((e=>e("learnpress/quiz").getData("passingGrade")),[]),c=(0,o.useSelect)((e=>e("learnpress/quiz").getData("submitting")),[]);(0,r.useEffect)((()=>{p();let e="";if(e=u.graduation?u.graduation:u.result>=f?"passed":"failed",e){const t=document.querySelector(`.course-curriculum .course-item.course-item-${i}`);t&&(t.classList.remove("failed","passed"),t.classList.add("has-status","status-completed",e))}const t=[...document.querySelectorAll("#popup-header .items-progress")][0],s=document.querySelector(".curriculum-sections");if(t&&s){const e=t.dataset.totalItems,s=t.querySelector(".items-completed"),n=t.querySelector(".learn-press-progress__active");if(s){const t=document.querySelectorAll("#popup-sidebar .course-curriculum .course-item.status-completed");s.textContent=parseInt(t.length);const r=100-100*parseInt(t.length)/parseInt(e);n.style.left="-"+r+"%"}}}),[u]),(0,r.useEffect)((()=>{void 0!==c&&d()}),[c]);const d=()=>{const e=document.querySelectorAll(".popup-header__inner");e.length>0&&0===e[0].querySelectorAll("form.form-button-finish-course").length&&(async e=>{const t=await wp.apiFetch({path:(0,A.addQueryArgs)("lp/v1/lazy-load/items-progress",{courseId:lpGlobalSettings.post_id||"",userId:lpGlobalSettings.user_id||""}),method:"GET"}),{data:s}=t;e.innerHTML+=s,x.init()})(e[0])},p=()=>{t(0),n(!1),jQuery.easing._customEasing=function(e,t,s,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+s},D((()=>{const e=jQuery("<span />").css({width:1,height:1}).appendTo(document.body);e.css("left",0).animate({left:u.result},{duration:1500,step:(e,s)=>{t(e)},done:()=>{n(!0),e.remove(),jQuery("#quizResultGrade").css({transform:"scale(1.3)",transition:"all 0.25s"}),D((()=>{jQuery("#quizResultGrade").css({transform:"scale(1)"})}),500)()},easing:"_customEasing"})}),u.result>0?1e3:10)()};let m=e;Number.isInteger(e)||(m=parseFloat(e).toFixed(2));const h=190*Math.PI,g={strokeDasharray:`${h} ${h}`,strokeDashoffset:h-m/100*h},f=parseFloat(u.passingGrade||l);let _="";_=u.graduation?u.graduation:m>=f?"passed":"failed";let q="";q=u.graduationText?u.graduationText:"passed"===_?(0,a.__)("Passed","learnpress"):(0,a.__)("Failed","learnpress");const w=["quiz-result",_];return(0,r.createElement)("div",{className:w.join(" ")},(0,r.createElement)("h3",{className:"result-heading"},(0,a.__)("Your Result","learnpress")),(0,r.createElement)("div",{id:"quizResultGrade",className:"result-grade"},(0,r.createElement)("svg",{className:"circle-progress-bar",width:200,height:200},(0,r.createElement)("circle",{className:"circle-progress-bar__circle",stroke:"",strokeWidth:10,style:g,fill:"transparent",r:95,cx:100,cy:100})),(0,r.createElement)("span",{className:"result-achieved"},`${m}%`),(0,r.createElement)("span",{className:"result-require"},f+"%"||0)),s&&(0,r.createElement)("p",{className:"result-message"},q),(0,r.createElement)("ul",{className:"result-statistic"},(0,r.createElement)("li",{className:"result-statistic-field result-time-spend"},(0,r.createElement)("span",null,(0,a.__)("Time spent","learnpress")),(0,r.createElement)("p",null,u.timeSpend)),(0,r.createElement)("li",{className:"result-statistic-field result-point"},(0,r.createElement)("span",null,(0,a.__)("Points","learnpress")),(0,r.createElement)("p",null,u.userMark," / ",u.mark)),(0,r.createElement)("li",{className:"result-statistic-field result-questions"},(0,r.createElement)("span",null,(0,a.__)("Questions","learnpress")),(0,r.createElement)("p",null,u.questionCount)),(0,r.createElement)("li",{className:"result-statistic-field result-questions-correct"},(0,r.createElement)("span",null,(0,a.__)("Correct","learnpress")),(0,r.createElement)("p",null,u.questionCorrect)),(0,r.createElement)("li",{className:"result-statistic-field result-questions-wrong"},(0,r.createElement)("span",null,(0,a.__)("Wrong","learnpress")),(0,r.createElement)("p",null,u.questionWrong)),(0,r.createElement)("li",{className:"result-statistic-field result-questions-skipped"},(0,r.createElement)("span",null,(0,a.__)("Skipped","learnpress")),(0,r.createElement)("p",null,u.questionEmpty))))};const H=jQuery,{debounce:F}=lodash;var U=()=>{const{submitQuiz:e}=(0,o.dispatch)("learnpress/quiz");(0,r.useEffect)((()=>{const e=H("#popup-content");if(!e.length)return;const t=e.find(".content-item-scrollable:eq(1)"),s=e.find(".quiz-status").offset().top-92;let n=!1;t.on("scroll",(()=>{if(t.scrollTop()>=s){if(n)return;n=!0}else{if(!n)return;n=!1}n?e.addClass("fixed-quiz-status"):e.removeClass("fixed-quiz-status")}))}),[]);const t=()=>{const{confirm:s}=(0,o.select)("learnpress/modal");"no"!==s((0,a.__)("Are you sure to submit the quiz?","learnpress"),t)&&e()},{getData:s,getUserMark:n}=(0,o.select)("learnpress/quiz"),i=s("currentPage"),u=s("questionsPerPage"),l=s("numberQuestionsToDo"),c=s("submitting"),d=(s("duration"),n()),p=["quiz-status"],m=(i-1)*u+1;let h=m+u-1,g="";return h=Math.min(h,l),c&&p.push("submitting"),g=h<l?u>1?(0,a.sprintf)((0,a.__)("Question <span>%d to %d of %d</span>","learnpress"),m,h,l):(0,a.sprintf)((0,a.__)("Question <span>%d of %d</span>","learnpress"),m,l):(0,a.sprintf)((0,a.__)("Question <span>%d to %d</span>","learnpress"),m,h),(0,r.createElement)("div",{className:p.join(" ")},(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"questions-index",dangerouslySetInnerHTML:{__html:g}}),(0,r.createElement)("div",{className:"current-point"},(0,a.sprintf)((0,a.__)("Earned Point: %s","learnpress"),d)),(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"submit-quiz"},(0,r.createElement)("button",{className:"lp-button",id:"button-submit-quiz",onClick:t},c?(0,a.__)("Submitting…","learnpress"):(0,a.__)("Finish Quiz","learnpress"))),(0,r.createElement)(C,null))))};const{omit:$,flow:j,isArray:B,chunk:J}=lodash,{camelCaseDashObjectKeys:G}=LP,{get:K,set:W}=LP.localStorage,Z={},Y=(e,t)=>(t.currentPage&&W(`Q${e.id}.currentPage`,t.currentPage),{...e,...t}),V=j(o.combineReducers,(e=>(t,s)=>e(t,s)),(e=>(t,s)=>e(t,s)),(e=>(t,s)=>e(t,s)))({a(e={a:1},t){return e},b(e={b:2},t){return e}});var X=(0,o.combineReducers)({blocks:V,userQuiz:(e=Z,t)=>{switch(t.type){case"SET_QUIZ_DATA":1>t.data.questionsPerPage&&(t.data.questionsPerPage=1);const s=J(e.questionIds||t.data.questionIds,t.data.questionsPerPage);return t.data.numPages=s.length,t.data.pages=s,{...e,...t.data,currentPage:K(`Q${t.data.id}.currentPage`)||t.data.currentPage};case"SUBMIT_QUIZ":return{...e,submitting:!0};case"START_QUIZ":case"START_QUIZ_SUCCESS":return((e,t)=>{const s=void 0!==t.results.success&&t.results.success,n=t.results.message||!1,r=J(t.results.results.questionIds,e.questionsPerPage);return e.numPages=r.length,Y(e,{checkedQuestions:[],hintedQuestions:[],mode:"",currentPage:1,...t.results.results,successResponse:s,messageResponse:n})})(e,t);case"SET_CURRENT_QUESTION":return W(`Q${e.id}.currentQuestion`,t.questionId),{...e,currentQuestion:t.questionId};case"SET_CURRENT_PAGE":return W(`Q${e.id}.currentPage`,t.currentPage),{...e,currentPage:t.currentPage};case"SUBMIT_QUIZ_SUCCESS":return((e,t)=>{localStorage.removeItem(`LP_Quiz_${e.id}_Answered`);const s=e.questions.map((s=>{const n={};return e.reviewQuestions&&(t.results.questions[s.id]?.explanation&&(n.explanation=t.results.questions[s.id].explanation),t.results.questions[s.id]?.options&&(n.options=t.results.questions[s.id].options)),{...s,...n}}));return Y(e,{submitting:!1,currentPage:1,...t.results,questions:[...s]})})(e,t);case"UPDATE_USER_QUESTION_ANSWERS":return"started"===e.status?((e,t)=>{const{answered:s,id:n}=e,r={...s[t.questionId]||{},answered:t.answers,temp:!0};return n&&localStorage.setItem(`LP_Quiz_${n}_Answered`,JSON.stringify({...e.answered,[t.questionId]:r})),{...e,answered:{...e.answered,[t.questionId]:r}}})(e,t):e;case"MARK_QUESTION_RENDERED":return((e,t)=>{const{questionsRendered:s}=e;return B(s)?(s.push(t.questionId),{...e,questionsRendered:[...s]}):{...e,questionsRendered:[t.questionId]}})(e,t);case"SET_QUIZ_MODE":return"reviewing"==t.mode?Y(e,{mode:t.mode}):{...e,mode:t.mode};case"SET_QUESTION_HINT":return((e,t)=>{const s=e.questions.map((e=>e.id==t.questionId?{...e,showHint:t.showHint}:e));return{...e,questions:[...s]}})(e,t);case"CHECK_ANSWER":return((e,t)=>{const s=e.questions.map((e=>{if(e.id!==t.questionId)return e;const s={explanation:t.explanation};return t.options&&(s.options=t.options),{...e,...s}})),n={...e.answered,[t.questionId]:t.result};let r=localStorage.getItem(`LP_Quiz_${e.id}_Answered`);return r&&(r={...JSON.parse(r),...n},localStorage.setItem(`LP_Quiz_${e.id}_Answered`,JSON.stringify(r))),{...e,questions:[...s],answered:n,checkedQuestions:[...e.checkedQuestions,t.questionId]}})(e,t);case"SEND_KEY":return{...e,keyPressed:t.keyPressed}}return e}}),ee=window.LP.dataControls;function te(){const e=[].slice.call(arguments,2);(0,o.dispatch)(arguments[0])[arguments[1]](...e)}const{camelCaseDashObjectKeys:se,Hook:ne}=LP;function re(e,t){return{type:"SET_QUIZ_DATA",data:se(t="string"==typeof e?{[e]:t}:e)}}function ie(e){return{type:"SET_CURRENT_QUESTION",questionId:e}}function oe(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}function ae(e,t,s){return{type:"BEFORE_START_QUIZ"}}function ue(e,t,s,n){return ne.doAction("quiz-started",e,t,s,n),{type:"START_QUIZ_SUCCESS",quizId:t,courseId:s,userId:n,results:e}}const le=function*(){const{itemId:e,courseId:t}=(0,o.select)("learnpress/quiz").getDefaultRestArgs();if(!0!==ne.applyFilters("before-start-quiz",!0,e,t))return;let s=yield(0,ee.apiFetch)({path:"lp/v1/users/start-quiz",method:"POST",data:{item_id:e,course_id:t}});const n=document.querySelector(".lp-button.start");if("error"!==s.status){s=ne.applyFilters("request-start-quiz-response",s,e,t);const{results:n}=s,{duration:r,status:i,question_ids:o,questions:a}=n;if(1===lpQuizSettings.checkNorequizenroll){const e="quiz_off_"+lpQuizSettings.id;window.localStorage.removeItem(e);const t={endTime:Date.now()+1e3*r,status:i,question_ids:o,questions:a};window.localStorage.setItem(e,JSON.stringify(t));const s="quiz_off_retaken_"+lpQuizSettings.id;let n=window.localStorage.getItem(s);null===n?n=0:n++,window.localStorage.setItem(s,n)}window.localStorage.removeItem("LP"),window.location.reload()}else{const e=document.querySelector(".quiz-buttons"),t=`<div class="learn-press-message error">${s.message}</div>`;e.insertAdjacentHTML("afterend",t),n.classList.remove("loading")}};function ce(){return{type:"SUBMIT_QUIZ"}}function de(e,t,s){return ne.doAction("quiz-submitted",e,t,s),{type:"SUBMIT_QUIZ_SUCCESS",results:e}}function*pe(){const{getDefaultRestArgs:e,getQuestionsSelectedAnswers:t}=(0,o.select)("learnpress/quiz"),{itemId:s,courseId:n}=e();if(!0!==ne.applyFilters("before-submit-quiz",!0))return;const r=t();if(1===lpQuizSettings.checkNorequizenroll){const e=`quiz_off_${lpQuizSettings.id}`,t=window.localStorage.getItem(e),n=JSON.parse(t),i=`LP_Quiz_${s}_Answered`,o=localStorage.getItem(i);if(null!==o){const e=JSON.parse(o);for(const[t,s]of Object.entries(e))r[t]=s.answered}n.question_ids.forEach((e=>{r[e]||(r[e]="")}))}let i=0;const a=document.querySelector("input[name=lp-quiz-time-spend]");a&&(i=a.value);let u=yield(0,ee.apiFetch)({path:"lp/v1/users/submit-quiz",method:"POST",data:{item_id:s,course_id:n,answered:r,time_spend:i}});if(u=ne.applyFilters("request-submit-quiz-response",u,s,n),"success"===u.status){if(1===lpQuizSettings.checkNorequizenroll){const e="quiz_off_"+lpQuizSettings.id,t=window.localStorage.getItem(e);if(null!==t){const s=JSON.parse(t);s.status=u.results.status,s.results=u.results.results,window.localStorage.setItem(e,JSON.stringify(s)),window.localStorage.removeItem("LP_Quiz_"+lpQuizSettings.id+"_Answered")}}yield te("learnpress/quiz","__requestSubmitQuizSuccess",se(u.results),s,n)}}function me(e,t,s,n=0,r=0){return{type:"UPDATE_USER_QUESTION_ANSWERS",questionId:e,answers:t}}function he(e,t){return{type:"SET_QUESTION_HINT",questionId:e,showHint:t}}function*ge(e,t){yield te("learnpress/quiz","__requestShowHintSuccess",e,t)}function fe(e,t){return{type:"CHECK_ANSWER",questionId:e,...t}}function*_e(e){const{getDefaultRestArgs:t,getQuestionAnswered:s}=(0,o.select)("learnpress/quiz"),{itemId:n,courseId:r}=t(),i=yield(0,ee.apiFetch)({path:"lp/v1/users/check-answer",method:"POST",data:{item_id:n,course_id:r,question_id:e,answered:s(e)||""}});if("success"===i.status){if(1===lpQuizSettings.checkNorequizenroll){const t="quiz_off_"+lpQuizSettings.id,s=window.localStorage.getItem(t);if(null!==s){const n=JSON.parse(s),r=i.options;void 0===n.checked_questions?(n.checked_questions=[],n.checked_questions.push(e)):-1===n.checked_questions.indexOf(e)&&n.checked_questions.push(e),void 0===n.question_options?(n.question_options={},n.question_options[e]=r):void 0===n.question_options[e]&&(n.question_options[e]=r),window.localStorage.setItem(t,JSON.stringify(n))}}yield te("learnpress/quiz","__requestCheckAnswerSuccess",e,se(i))}}function qe(e){return{type:"MARK_QUESTION_RENDERED",questionId:e}}function we(e){return{type:"SET_QUIZ_MODE",mode:e}}function Se(e){return setTimeout((()=>{te("learnpress/quiz","sendKey","")}),300),{type:"SEND_KEY",keyPressed:e}}const{get:Ee,isArray:ve}=lodash,ye=function(e,t){console.time("parseOptions");let s=Re(e,t).options;return s=ve(s)?s:JSON.parse(CryptoJS.AES.decrypt(s.data,s.key,{format:CryptoJSAesJson}).toString(CryptoJS.enc.Utf8)),s=ve(s)?s:JSON.parse(s),console.timeEnd("parseOptions"),s};function ze(e,t){const s=(0,o.select)("course-learner/user").getItemById(t);return s?Ee(s,"userSettings.status"):""}function ke(e,t,s){return e[t]||s}function Pe(e,t){const s=(0,o.select)("course-learner/user").getItemById(t);return s?Ee(s,"userSettings.attempts"):[]}function Qe(e,t){const s=(0,o.select)("course-learner/user").getItemById(t);return s?Ee(s,"userSettings.answered",{}):{}}function be(e){const{userQuiz:t}=e,s=Ee(t,"questions");return s?Object.values(s):[]}function Ne(e,t){const{userQuiz:s}=e;return t?Ee(s,t):s}function Ie(e){const{userQuiz:t}=e;return{itemId:t.id,courseId:t.courseId}}function Ce(e,t){const{userQuiz:s}=e;return Ee(s,`answered.${t}.answered`)||void 0}function Ae(e,t){const{userQuiz:s}=e;return Ee(s,`answered.${t}.mark`)||void 0}function Te(e,t=""){if((Ee(e,"userQuiz.questionsPerPage")||1)>1)return!1;const s=Ee(e,"userQuiz.currentPage")||1;return Ee(e,"object"===t?`userQuiz.questions[${s-1}]`:`userQuiz.questionIds[${s-1}]`)}const Re=function(e,t){const{userQuiz:s}=e;return(0,o.select)("learnpress/quiz").getQuestions().find((e=>e.id==t))};function Oe(e,t){return-1!==(Ee(e,"userQuiz.checkedQuestions")||[]).indexOf(t)}function Le(e,t){}const xe=function(e,t){const s=Ee(e,"userQuiz.answered"),n={};for(const e in s)if(s.hasOwnProperty(e)&&(s[e].temp||s[e].blanks)){if(t&&e===t)return s[e].answered;n[e]=s[e].answered}return n};function De(e){const t=e.userQuiz||{},{answered:s,negativeMarking:n,questions:r,checkedQuestions:i}=t;let o=0;for(let e in s){if(!s.hasOwnProperty(e))continue;e=parseInt(e);const t=s[e],a=t.questionMark?t.questionMark:function(){const t=r.find((t=>t.id===e));return t?t.point:0}();i.indexOf(e),t.temp||(n?t.answered&&(o=t.correct?o+t.mark:o-a):t.answered&&t.correct&&(o+=t.mark))}return o>0?o:0}var Me=s(965),He=s.n(Me);const Fe={ENROLL_COURSE_X:(e,t)=>{}};const{controls:Ue}=LP.dataControls;!function(e){let t=()=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const s={getState:e.getState,dispatch:(...e)=>t(...e)};t=He()(Fe)(s)(e.dispatch),e.dispatch=t}((0,o.registerStore)("learnpress/quiz",{reducer:X,selectors:t,actions:e,controls:{...Ue}}));const{chunk:$e}=lodash;class je extends r.Component{constructor(e){super(...arguments),this.state={currentPage:1,numPages:0,pages:[]}}componentDidMount(){const{settings:e,setQuizData:t}=this.props,{question_ids:s,questions_per_page:n}=e,r=$e(s,n);e.currentPage=1,e.numPages=r.length,e.pages=r;const i=!!e.id&&localStorage.getItem(`LP_Quiz_${e.id}_Answered`);i&&(e.answered=JSON.parse(i)),t(e)}componentDidUpdate(e,t,s){const{status:n}=e,r=document.querySelector(".quiz-content");void 0!==n&&r&&(r.style.display="none")}startQuiz=e=>{this.props.startQuiz()};render(){const{status:e,isReviewing:t,answered:s}=this.props;wp.hooks.doAction("lp-js-quiz-answer",s,e);const n=-1!==["","completed","viewed"].indexOf(e)||!e,i=-1!==["","viewed",void 0].indexOf(e)||!e;return void 0!==e&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",null,!t&&"completed"===e&&(0,r.createElement)(M,null),!t&&i&&(0,r.createElement)(c,null),"started"===e&&(0,r.createElement)(U,null),(-1!==["completed","started"].indexOf(e)||t)&&(0,r.createElement)(N,null),(0,r.createElement)(m,null),n&&!t&&(0,r.createElement)(I,null)))}}var Be=(0,i.compose)([(0,o.withSelect)((e=>{const{getQuestions:t,getData:s}=e("learnpress/quiz");return{questions:t(),status:s("status"),store:s(),answered:s("answered"),isReviewing:"reviewing"===s("mode"),questionIds:s("questionIds"),checkCount:s("instantCheck"),questionsPerPage:s("questionsPerPage")||1}})),(0,o.withDispatch)((e=>{const{setQuizData:t,startQuiz:s}=e("learnpress/quiz");return{setQuizData:t,startQuiz:s}}))])(je);s(605);const{modal:{default:Je}}=LP;var Ge=Be;const Ke=(e,t)=>{if(1===lpQuizSettings.checkNorequizenroll){const e="quiz_off_"+lpQuizSettings.id,s=window.localStorage.getItem(e);if(null!==s){const e=JSON.parse(s);if(t.status=e.status,t.questions=e.questions,"started"===e.status){const s=Date.now();t.total_time=Math.floor((e.endTime-s)/1e3)}else"completed"===e.status&&(t.results=e.results,t.answered=e.results.answered,t.questions=e.results.questions);if(void 0!==e.checked_questions&&(t.checked_questions=e.checked_questions),void 0!==e.question_options)for(const s in t.questions){const n=t.questions[s];void 0!==e.question_options[n.id]&&(n.options=e.question_options[n.id]),t.questions[s]=n}}}wp.element.render((0,r.createElement)(Je,null,(0,r.createElement)(Be,{settings:t})),[...document.querySelectorAll(e)][0]),LP.Hook.doAction("lp-quiz-compatible-builder")}}(),(window.LP=window.LP||{}).quiz=n}();